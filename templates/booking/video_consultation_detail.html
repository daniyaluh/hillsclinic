{% extends "base.html" %}

{% block title %}{{ page_title }} - Hills Clinic{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-br from-stone-900 via-stone-800 to-stone-900 text-white py-12">
    <div class="container mx-auto px-4 text-center">
        <h1 class="text-3xl font-serif font-bold">Your Video Consultation</h1>
    </div>
</section>

<section class="py-16 bg-stone-50">
    <div class="container mx-auto px-4">
        <div class="max-w-3xl mx-auto">
            <div class="bg-white rounded-3xl shadow-sm ring-1 ring-stone-200 overflow-hidden">
                <!-- Status Banner -->
                {% if consultation.status == 'scheduled' %}
                <div class="bg-emerald-500 text-white px-6 py-4 text-center">
                    <span class="font-semibold">✓ Confirmed</span> - Your consultation is scheduled
                </div>
                {% elif consultation.status == 'pending_payment' %}
                <div class="bg-amber-500 text-white px-6 py-4 text-center">
                    <span class="font-semibold">⏳ Pending Payment</span> - Complete payment to confirm
                </div>
                {% elif consultation.status == 'completed' %}
                <div class="bg-stone-500 text-white px-6 py-4 text-center">
                    <span class="font-semibold">✓ Completed</span>
                </div>
                {% endif %}
                
                <div class="p-8">
                    <!-- Date & Time -->
                    <div class="text-center mb-10">
                        <div class="inline-flex items-center justify-center w-20 h-20 bg-amber-100 rounded-2xl mb-4">
                            <svg class="w-10 h-10 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-serif font-bold text-stone-900 mb-2">
                            {{ consultation.scheduled_date|date:"l, F j, Y" }}
                        </h2>
                        <p class="text-xl text-amber-600 font-semibold">
                            {{ consultation.scheduled_time|time:"g:i A" }} ({{ consultation.duration_minutes }} minutes)
                        </p>
                    </div>
                    
                    <!-- Details Grid -->
                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-stone-50 rounded-2xl p-5">
                            <h3 class="text-xs font-semibold text-stone-500 uppercase tracking-wide mb-3">Patient</h3>
                            <p class="font-semibold text-stone-900">{{ consultation.patient_name }}</p>
                            <p class="text-stone-600">{{ consultation.patient_email }}</p>
                            {% if consultation.patient_phone %}
                            <p class="text-stone-600">{{ consultation.patient_phone }}</p>
                            {% endif %}
                        </div>
                        
                        <div class="bg-stone-50 rounded-2xl p-5">
                            <h3 class="text-xs font-semibold text-stone-500 uppercase tracking-wide mb-3">Procedure Interest</h3>
                            <p class="font-semibold text-stone-900">{{ consultation.get_procedure_interest_display }}</p>
                            {% if consultation.desired_height_gain %}
                            <p class="text-stone-600">Goal: {{ consultation.desired_height_gain }}</p>
                            {% endif %}
                        </div>
                    </div>
                    
                    {% if consultation.reason %}
                    <div class="mb-8">
                        <h3 class="text-xs font-semibold text-stone-500 uppercase tracking-wide mb-3">Consultation Reason</h3>
                        <p class="text-stone-700 bg-stone-50 p-5 rounded-2xl">{{ consultation.reason }}</p>
                    </div>
                    {% endif %}
                    
                    <!-- Join Button -->
                    {% if consultation.status == 'scheduled' %}
                    <div class="text-center">
                        {% if consultation.can_join %}
                        <a href="{% url 'booking:video_consultation_join' pk=consultation.pk %}" 
                           class="inline-flex items-center px-10 py-4 bg-emerald-600 text-white font-semibold rounded-full hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-600/25 text-lg">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                            </svg>
                            Join Video Call
                        </a>
                        {% else %}
                        <div class="bg-stone-100 rounded-2xl p-6">
                            <p class="text-stone-600 mb-2">The video call will be available</p>
                            <p class="font-semibold text-stone-900">10 minutes before your scheduled time</p>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
                
                <!-- Preparation Tips -->
                <div class="bg-amber-50 px-8 py-6 border-t border-amber-200">
                    <h3 class="font-semibold text-amber-800 mb-4">Prepare for Your Consultation</h3>
                    <ul class="grid md:grid-cols-2 gap-3 text-sm text-amber-700">
                        <li class="flex items-start gap-2">
                            <svg class="w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Test your camera and microphone
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Find a quiet, well-lit space
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Have your questions ready
                        </li>
                        <li class="flex items-start gap-2">
                            <svg class="w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Join 5 minutes early
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Back Link -->
            <div class="mt-6 text-center">
                <a href="{% url 'portal:dashboard' %}" class="text-stone-600 hover:text-amber-700 font-medium">
                    ← Back to Dashboard
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}
