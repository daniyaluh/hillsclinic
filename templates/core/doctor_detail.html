{% extends "base.html" %}
{% load wagtailimages_tags %}

{% block title %}{{ doctor.name }}, {{ doctor.title }} - Hills Clinic{% endblock %}

{% block extra_head %}
<!-- Doctor Profile Schema -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Physician",
    "name": "{{ doctor.name }}",
    "jobTitle": "{{ doctor.role }}",
    "description": "{{ doctor.short_bio }}",
    "medicalSpecialty": "{{ doctor.get_specialty_display }}",
    {% if doctor.photo %}{% image doctor.photo width-400 as schema_img %}"image": "{{ request.scheme }}://{{ request.get_host }}{{ schema_img.url }}",{% endif %}
    "worksFor": {
        "@type": "MedicalOrganization",
        "name": "Hills Clinic"
    }
}
</script>
{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav class="bg-stone-50 py-4 border-b border-stone-200">
    <div class="container mx-auto px-4">
        <div class="flex items-center text-sm text-stone-500">
            <a href="/" class="hover:text-amber-600 transition">Home</a>
            <svg class="w-4 h-4 mx-2 text-stone-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <a href="{% url 'core:team' %}" class="hover:text-amber-600 transition">Our Team</a>
            <svg class="w-4 h-4 mx-2 text-stone-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <span class="text-stone-900 font-medium">{{ doctor.name }}</span>
        </div>
    </div>
</nav>

<!-- Doctor Header -->
<section class="py-12 md:py-16 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-5xl mx-auto">
            <div class="grid md:grid-cols-3 gap-8 lg:gap-12 items-start">
                <!-- Photo -->
                <div class="md:col-span-1">
                    <div class="aspect-square bg-gradient-to-br from-stone-100 to-stone-200 rounded-3xl overflow-hidden shadow-xl ring-1 ring-stone-200">
                        {% if doctor.photo %}
                        {% image doctor.photo fill-500x500 as doctor_img %}
                        <img src="{{ doctor_img.url }}" alt="{{ doctor.name }}" class="w-full h-full object-cover">
                        {% else %}
                        <div class="w-full h-full bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center">
                            <span class="text-6xl font-bold text-amber-600">{{ doctor.name|slice:":2"|upper }}</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Contact Info -->
                    <div class="mt-6 space-y-3">
                        {% if doctor.email %}
                        <a href="mailto:{{ doctor.email }}" class="flex items-center text-stone-600 hover:text-amber-600 transition group">
                            <div class="w-10 h-10 bg-stone-100 rounded-xl flex items-center justify-center mr-3 group-hover:bg-amber-100 transition">
                                <svg class="w-5 h-5 text-stone-500 group-hover:text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <span class="text-sm">{{ doctor.email }}</span>
                        </a>
                        {% endif %}
                        {% if doctor.linkedin_url %}
                        <a href="{{ doctor.linkedin_url }}" target="_blank" class="flex items-center text-stone-600 hover:text-amber-600 transition group">
                            <div class="w-10 h-10 bg-stone-100 rounded-xl flex items-center justify-center mr-3 group-hover:bg-amber-100 transition">
                                <svg class="w-5 h-5 text-stone-500 group-hover:text-amber-600" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                </svg>
                            </div>
                            <span class="text-sm">LinkedIn Profile</span>
                        </a>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Info -->
                <div class="md:col-span-2">
                    <div class="mb-4">
                        <span class="inline-block px-4 py-1.5 bg-amber-100 text-amber-700 rounded-full text-sm font-medium">
                            {{ doctor.get_specialty_display }}
                        </span>
                    </div>
                    
                    <h1 class="text-3xl md:text-4xl font-serif font-bold text-stone-900 mb-2">{{ doctor.name }}, {{ doctor.title }}</h1>
                    <p class="text-xl text-amber-600 font-medium mb-6">{{ doctor.role }}</p>
                    
                    <!-- Quick Stats -->
                    <div class="grid grid-cols-3 gap-4 mb-8">
                        <div class="text-center p-4 bg-stone-50 rounded-2xl ring-1 ring-stone-200">
                            <div class="text-2xl font-bold text-amber-600">{{ doctor.experience_years }}+</div>
                            <div class="text-sm text-stone-600">Years Experience</div>
                        </div>
                        {% if doctor.languages_list %}
                        <div class="text-center p-4 bg-stone-50 rounded-2xl ring-1 ring-stone-200">
                            <div class="text-2xl font-bold text-amber-600">{{ doctor.languages_list|length }}</div>
                            <div class="text-sm text-stone-600">Languages</div>
                        </div>
                        {% endif %}
                        {% if doctor.certifications_list %}
                        <div class="text-center p-4 bg-stone-50 rounded-2xl ring-1 ring-stone-200">
                            <div class="text-2xl font-bold text-amber-600">{{ doctor.certifications_list|length }}</div>
                            <div class="text-sm text-stone-600">Certifications</div>
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Languages -->
                    {% if doctor.languages_list %}
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-stone-500 uppercase tracking-wide mb-3">Languages</h3>
                        <div class="flex flex-wrap gap-2">
                            {% for lang in doctor.languages_list %}
                            <span class="px-4 py-1.5 bg-stone-100 text-stone-700 rounded-full text-sm ring-1 ring-stone-200">{{ lang }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Book Consultation -->
                    <a href="{% url 'booking:consultation' %}" class="inline-flex items-center px-8 py-4 bg-amber-600 text-white font-semibold rounded-full hover:bg-amber-700 transition-all shadow-lg shadow-amber-600/25">
                        Book Consultation
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Biography -->
<section class="py-16 bg-stone-50">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-2xl font-serif font-bold text-stone-900 mb-6">About {{ doctor.name }}</h2>
            <div class="prose prose-lg max-w-none text-stone-600 prose-headings:text-stone-900 prose-a:text-amber-600">
                {{ doctor.bio|linebreaks }}
            </div>
        </div>
    </div>
</section>

<!-- Education & Credentials -->
<section class="py-16 bg-white">
    <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
            <div class="grid md:grid-cols-2 gap-12">
                <!-- Education -->
                {% if doctor.education_list %}
                <div class="bg-stone-50 rounded-3xl ring-1 ring-stone-200 p-8">
                    <h2 class="text-xl font-serif font-bold text-stone-900 mb-6 flex items-center">
                        <div class="w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M12 14l9-5-9-5-9 5 9 5z"/>
                                <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"/>
                            </svg>
                        </div>
                        Education & Training
                    </h2>
                    <ul class="space-y-4">
                        {% for edu in doctor.education_list %}
                        <li class="flex items-start">
                            <span class="w-2 h-2 bg-amber-500 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                            <span class="text-stone-600">{{ edu }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                
                <!-- Certifications -->
                {% if doctor.certifications_list %}
                <div class="bg-stone-50 rounded-3xl ring-1 ring-stone-200 p-8">
                    <h2 class="text-xl font-serif font-bold text-stone-900 mb-6 flex items-center">
                        <div class="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                            </svg>
                        </div>
                        Certifications
                    </h2>
                    <ul class="space-y-4">
                        {% for cert in doctor.certifications_list %}
                        <li class="flex items-start">
                            <svg class="w-5 h-5 text-emerald-500 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            <span class="text-stone-600">{{ cert }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Other Team Members -->
{% if other_doctors %}
<section class="py-16 bg-stone-50">
    <div class="container mx-auto px-4">
        <div class="max-w-5xl mx-auto">
            <h2 class="text-2xl font-serif font-bold text-stone-900 mb-8 text-center">Meet the Rest of Our Team</h2>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                {% for staff in other_doctors %}
                <a href="{{ staff.get_absolute_url }}" class="group">
                    <div class="bg-white rounded-2xl p-4 text-center ring-1 ring-stone-200 hover:ring-amber-300 hover:shadow-lg transition-all">
                        <div class="w-16 h-16 bg-stone-100 rounded-2xl flex items-center justify-center mx-auto mb-3 overflow-hidden">
                            {% if staff.photo %}
                            {% image staff.photo fill-100x100 as staff_img %}
                            <img src="{{ staff_img.url }}" alt="{{ staff.name }}" class="w-full h-full object-cover">
                            {% else %}
                            <span class="text-lg font-bold text-amber-600">{{ staff.name|slice:":2"|upper }}</span>
                            {% endif %}
                        </div>
                        <h3 class="font-semibold text-sm text-stone-900 group-hover:text-amber-600 transition">{{ staff.name }}</h3>
                        <p class="text-stone-500 text-xs">{{ staff.role }}</p>
                    </div>
                </a>
                {% endfor %}
            </div>
            
            <div class="text-center mt-8">
                <a href="{% url 'core:team' %}" class="text-amber-600 font-medium hover:text-amber-700 inline-flex items-center">
                    View All Team Members
                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="py-20 bg-gradient-to-br from-stone-900 via-stone-800 to-stone-900 text-white relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-amber-500 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-amber-600 rounded-full blur-3xl"></div>
    </div>
    <div class="container mx-auto px-4 text-center relative">
        <h2 class="text-3xl md:text-4xl font-serif font-bold mb-4">Ready to Start Your Journey?</h2>
        <p class="text-xl text-stone-300 mb-8 max-w-2xl mx-auto">Schedule a consultation with {{ doctor.name }} to discuss your goals.</p>
        <a href="{% url 'booking:consultation' %}" class="inline-flex items-center px-8 py-4 bg-amber-600 text-white font-semibold rounded-full hover:bg-amber-700 transition-all shadow-lg shadow-amber-600/25">
            Book Consultation
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
        </a>
    </div>
</section>
{% endblock %}
